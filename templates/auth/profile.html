{% extends "base.html" %}

{% block title %}Profile - AI Scholar{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <div class="profile-header-content">
            <div class="profile-avatar">
                <div class="avatar-placeholder">
                    <i class="fas fa-user"></i>
                </div>
            </div>
            <div class="profile-info">
                <h1 class="profile-name">{{ current_user.username }}</h1>
                <p class="profile-title">AI Scholar User</p>
                <div class="profile-stats">
                    <span class="stat-item">
                        <i class="fas fa-search"></i>
                        <span data-user-searches="{{ searches|length }}">{{ searches|length }} Searches</span>
                    </span>
                    <span class="stat-item">
                        <i class="fas fa-calendar"></i>
                        <span>Since {{ current_user.created_at.strftime('%B %Y') }}</span>
                    </span>
                </div>
            </div>
            <div class="profile-actions">
                <button type="button" class="btn btn-primary" id="editProfileBtn">
                    <i class="fas fa-edit"></i>
                    Edit Profile
                </button>
            </div>
        </div>
    </div>

    <div class="profile-nav">
        <nav class="nav nav-pills nav-justified">
            <a class="nav-link active" href="#" data-tab="profile">
                <i class="fas fa-user me-2"></i>Profile Info
            </a>
            <a class="nav-link" href="#" data-tab="stats">
                <i class="fas fa-chart-bar me-2"></i>Dashboard
            </a>
            <a class="nav-link" href="#" data-tab="settings">
                <i class="fas fa-cog me-2"></i>Settings
            </a>
        </nav>
    </div>

    <div class="profile-content">
        <div class="tab-pane fade show active" id="profile-tab" style="display: block;">
            <div class="profile-section">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-user-circle me-2"></i>
                        Profile Information
                    </h3>
                </div>
                
                <div class="profile-info-grid">
                    <div class="profile-info-card">
                        <div class="info-group">
                            <div class="field-group">
                                <label class="field-label">
                                    <i class="fas fa-user me-2"></i>Username
                                </label>
                                <div class="field-value">{{ current_user.username }}</div>
                            </div>
                            
                            <div class="field-group">
                                <label class="field-label">
                                    <i class="fas fa-envelope me-2"></i>Email
                                </label>
                                <div class="field-value">{{ current_user.email }}</div>
                            </div>
                            
                            <div class="field-group">
                                <label class="field-label">
                                    <i class="fas fa-calendar-alt me-2"></i>Member Since
                                </label>
                                <div class="field-value">{{ current_user.created_at.strftime('%B %d, %Y') }}</div>
                            </div>
                        </div>
                    </div>

                    <div class="profile-actions-card">
                        <h4 class="actions-title">Account Actions</h4>
                        <div class="action-buttons">
                            <button type="button" class="btn btn-outline-primary" id="changePasswordBtn">
                                <i class="fas fa-key me-2"></i>Change Password
                            </button>
                            <button type="button" class="btn btn-outline-secondary" id="exportDataBtn">
                                <i class="fas fa-download me-2"></i>Export Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="stats-tab" style="display: none;">
            <div class="profile-section">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-chart-bar me-2"></i>
                        Your Dashboard
                    </h3>
                    <p class="section-description">Overview of your search activity and platform usage</p>
                </div>
                
                <div id="userStats" class="loading-placeholder">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading stats...</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="settings-tab" style="display: none;">
            <div class="profile-section">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-cog me-2"></i>
                        Settings
                    </h3>
                    <p class="section-description">Customize your AI Scholar experience</p>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-card">
                        <div class="settings-card-header">
                            <h4 class="settings-card-title">
                                <i class="fas fa-palette me-2"></i>Appearance
                            </h4>
                        </div>
                        <div class="settings-card-body">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <label class="setting-label">Dark Mode</label>
                                    <p class="setting-description">Toggle between light and dark themes</p>
                                </div>
                                <div class="setting-control">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="themeToggle">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="settings-card-header">
                            <h4 class="settings-card-title">
                                <i class="fas fa-bell me-2"></i>Notifications
                            </h4>
                        </div>
                        <div class="settings-card-body">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <label class="setting-label">Browser Notifications</label>
                                    <p class="setting-description">Get notified about search results and updates</p>
                                </div>
                                <div class="setting-control">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="notificationToggle">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <div class="settings-card-header">
                            <h4 class="settings-card-title">
                                <i class="fas fa-save me-2"></i>Data & Privacy
                            </h4>
                        </div>
                        <div class="settings-card-body">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <label class="setting-label">Auto-save Search History</label>
                                    <p class="setting-description">Automatically save your searches for later reference</p>
                                </div>
                                <div class="setting-control">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="autoSaveToggle" checked>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}
